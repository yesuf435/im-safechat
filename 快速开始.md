# SafeChat 快速开始指南 ⚡

> **你需要的功能已经全部实现：私信 ✅ 群聊 ✅ 现代UI ✅**

## 🚀 60秒快速启动

### 方式一：Docker 一键启动（最简单！）

```bash
# 在项目根目录执行
docker-compose up --build

# 完成！访问：
# 前端：http://localhost
# 后端：http://localhost:3000
```

**就这么简单！** 🎉

---

### 方式二：手动启动（3步）

#### 1️⃣ 启动 MongoDB

```bash
# 使用 Docker（推荐）
docker run -d -p 27017:27017 --name mongodb mongo:7

# 或者安装本地 MongoDB
```

#### 2️⃣ 启动后端

```bash
cd backend
npm install
npm start

# 后端运行在 http://localhost:3001
```

#### 3️⃣ 打开前端

```bash
# 方式 A：直接用浏览器打开
open frontend/modern/index.html

# 方式 B：用简单的 HTTP 服务器
cd frontend/modern
python3 -m http.server 8080
# 访问 http://localhost:8080
```

---

## ✨ 核心功能（已实现）

### 1. 用户注册/登录 🔐
- 打开 `frontend/modern/index.html`
- 注册新用户或登录
- JWT 认证，安全可靠

### 2. 私信功能 💬
- 搜索好友 → 添加好友
- 点击好友 → 开始私聊
- **实时消息**（Socket.IO）
- **消息历史**（MongoDB 持久化）

### 3. 群聊功能 👥
- 点击"创建群聊"
- 选择好友（逗号分隔用户名，或留空=全部好友）
- 输入群名 → 创建
- **实时群消息**
- **群成员管理**

### 4. 现代化 UI 🎨
- 清爽的界面设计
- 消息气泡样式
- 会话列表
- 在线状态显示

---

## 📱 界面预览

打开登录页后，可以点击**"体验界面预览"**按钮，无需登录即可查看 UI 效果！

---

## ⚙️ 配置（可选）

### 前端配置（如果前后端不同端口）

```bash
cd frontend/modern
cp config.example.development.js config.js

# 编辑 config.js，设置后端地址
```

```javascript
window.CONFIG = {
  apiBaseUrl: 'http://localhost:3001',
  socketUrl: 'http://localhost:3001'
};
```

### 后端配置（可选环境变量）

```bash
# 设置环境变量（可选）
export MONGODB_URI=mongodb://localhost:27017/safechat
export JWT_SECRET=your_secret_key
export PORT=3001
export ALLOWED_ORIGINS=*  # 开发环境用 *
```

---

## 📁 核心文件（你需要关注的）

```
backend/
  ├── app.js              # 后端主文件（或使用 im-backend/）
  └── package.json        # 依赖管理

frontend/modern/
  ├── index.html          # 登录页
  ├── app.js              # 主应用逻辑
  ├── styles.css          # UI 样式
  └── config.js           # API 配置

docker-compose.yml        # Docker 一键启动
```

---

## 🎯 使用流程

### 用户 A（Alice）：
1. 注册账号 `alice`
2. 登录后搜索用户 `bob`
3. 发送好友请求

### 用户 B（Bob）：
1. 注册账号 `bob`
2. 接受 Alice 的好友请求
3. 现在可以互相私信了！

### 创建群聊：
1. Alice 点击"创建群聊"
2. 输入群名："工作群"
3. 输入成员：`bob,charlie` 或留空（所有好友）
4. 创建成功！开始群聊

---

## 🐛 常见问题

### Q: 提示"无法连接后端"？
**A:** 检查：
1. 后端是否启动？（`npm start` 在 backend 目录）
2. MongoDB 是否运行？（`docker ps` 查看）
3. 前端 `config.js` 配置是否正确？

### Q: 登录后看不到消息？
**A:** 
1. 确保 Socket.IO 连接成功（F12 查看 Console）
2. 检查浏览器 LocalStorage 中是否有 token

### Q: 需要部署到服务器？
**A:** 
1. Docker 部署：`docker-compose up -d`
2. 宝塔部署：运行 `bash deploy/create-baota-package.sh`

---

## 🎨 自定义 UI（可选）

想改界面？编辑这些文件：

- **样式**：`frontend/modern/styles.css`
- **布局**：`frontend/modern/index.html`
- **逻辑**：`frontend/modern/app.js`

所有代码都是纯 HTML/CSS/JS，没有复杂的构建工具！

---

## 📊 查看统计（可选）

登录后访问：`frontend/modern/admin.html`

可以看到：
- 在线用户数
- 总消息数
- 会话统计

---

## 🎉 就这么简单！

你现在拥有的功能：
- ✅ 用户注册/登录
- ✅ 私信（实时 + 历史记录）
- ✅ 群聊（实时 + 成员管理）
- ✅ 现代化 UI
- ✅ 跨设备同步（MongoDB）
- ✅ Socket.IO 实时通信

**不需要其他复杂功能，这就是你需要的核心 IM 系统！** 🚀

---

## 🆘 需要帮助？

**快速测试：**
```bash
# 一键启动
docker-compose up --build

# 浏览器打开
http://localhost

# 注册 → 添加好友 → 开始聊天！
```

**就是这么简单！享受你的 IM 系统吧！** 😊
