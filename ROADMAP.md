# SafeChat 开发路线图 🗺️

## 当前状态（v1.0）✅

### 已完成功能

- ✅ 用户注册/登录（JWT 认证）
- ✅ 好友搜索与添加
- ✅ 好友请求管理（发送/接受/拒绝）
- ✅ 一对一私聊
- ✅ 群聊功能
- ✅ 消息实时同步（Socket.IO）
- ✅ 跨设备消息历史（MongoDB 持久化）
- ✅ 管理后台控制台
- ✅ Docker 部署支持
- ✅ 前后端分离架构
- ✅ AI 编码助手指南（`.github/copilot-instructions.md`）
- ✅ 开发文档（`DEVELOPMENT.md`）

### 技术栈

- 后端：Node.js + Express + Socket.IO + MongoDB + Mongoose
- 前端：
  - 静态版本：HTML + CSS + JavaScript + Socket.IO Client
  - 现代版本：React + Vite + TailwindCSS
- 部署：Docker + Docker Compose
- 测试：Jest + Supertest + mongodb-memory-server

---

## v1.1 - 核心功能增强（2周）🚀

### 好友系统优化

- [ ] **好友在线状态**
  - 实时显示在线/离线/忙碌状态
  - Socket 连接/断开事件处理
  - 心跳机制保持状态同步

- [ ] **好友分组管理**
  - 创建自定义分组（家人/同事/朋友等）
  - 拖拽好友到不同分组
  - 分组折叠/展开

- [ ] **好友备注与标签**
  - 设置好友备注名
  - 添加自定义标签
  - 按标签筛选好友

### 消息功能增强

- [ ] **消息已读状态**
  - 单聊消息已读回执
  - 群聊消息已读人数统计
  - 未读消息计数

- [ ] **消息撤回**
  - 2分钟内可撤回消息
  - 显示"xxx 撤回了一条消息"
  - Socket 实时同步撤回状态

- [ ] **@提及功能**（群聊）
  - @某人发送消息
  - 被@时高亮提示
  - @所有人功能

### 用户体验优化

- [ ] **消息输入优化**
  - Enter 发送，Shift+Enter 换行
  - 正在输入提示（"对方正在输入..."）
  - 草稿保存功能

- [ ] **会话管理**
  - 置顶会话
  - 删除会话（仅客户端）
  - 会话免打扰
  - 清空聊天记录

---

## v1.2 - 媒体与富文本（3周）📸

### 图片功能

- [ ] **图片发送**
  - 选择本地图片上传
  - 图片预览与压缩
  - 支持 JPG、PNG、GIF

- [ ] **图片查看**
  - 点击图片放大查看
  - 图片滑动浏览
  - 长按保存图片

### 表情与贴图

- [ ] **Emoji 表情**
  - 内置 Emoji 选择器
  - 常用表情快速访问
  - 表情搜索功能

- [ ] **自定义表情包**
  - 上传自定义表情
  - 表情包管理
  - 表情收藏

### 文件传输

- [ ] **文件发送**
  - 支持文档、压缩包等
  - 文件大小限制（默认10MB）
  - 上传进度显示

- [ ] **文件下载**
  - 点击下载文件
  - 下载进度显示
  - 文件类型图标识别

---

## v1.3 - 语音与通话（4周）🎤

### 语音消息

- [ ] **录制语音消息**
  - 按住录音，松手发送
  - 录音时长显示
  - 取消录音功能

- [ ] **播放语音消息**
  - 点击播放/暂停
  - 播放进度条
  - 未听标记

### 实时通话（可选）

- [ ] **语音通话**
  - WebRTC 一对一语音通话
  - 来电提示
  - 通话时长显示

- [ ] **视频通话**（未来考虑）
  - WebRTC 视频通话
  - 前后摄像头切换
  - 通话质量自适应

---

## v1.4 - 移动端优化（2周）📱

### 响应式设计

- [ ] **移动端适配**
  - 触摸手势支持
  - 移动端导航栏
  - 移动端键盘适配

- [ ] **PWA 支持**
  - Service Worker 离线缓存
  - 添加到主屏幕
  - 推送通知（Web Push）

### 性能优化

- [ ] **消息列表虚拟化**
  - 长列表性能优化
  - 滚动加载更多
  - 消息懒加载

- [ ] **图片懒加载**
  - 可视区域内加载
  - 图片占位符
  - 加载失败重试

---

## v1.5 - 安全与隐私（2周）🔐

### 安全增强

- [ ] **端到端加密**（可选）
  - 消息加密传输
  - 密钥交换机制
  - 加密存储

- [ ] **敏感信息保护**
  - 密码强度检测
  - 防暴力破解
  - 异地登录提醒

### 隐私设置

- [ ] **隐私控制**
  - 谁可以加我为好友
  - 消息阅后即焚
  - 屏蔽用户功能

- [ ] **数据管理**
  - 导出聊天记录
  - 账号注销
  - 数据清理

---

## v2.0 - 高级功能（长期）🌟

### 社交功能

- [ ] **朋友圈/动态**
  - 发布文字/图片动态
  - 点赞与评论
  - 隐私可见范围

- [ ] **群组增强**
  - 群公告
  - 群文件共享
  - 群成员权限管理（群主/管理员）
  - 群禁言功能

### 机器人与集成

- [ ] **聊天机器人**
  - AI 智能回复
  - 自定义机器人 API
  - 机器人指令系统

- [ ] **第三方集成**
  - GitHub 通知机器人
  - RSS 订阅推送
  - 日历提醒

### 企业功能

- [ ] **组织架构**
  - 部门管理
  - 员工通讯录
  - 组织群组

- [ ] **审批流程**
  - 消息审批（敏感内容）
  - 文件审批
  - 操作日志

---

## 技术债务与重构 🔧

### 代码质量

- [ ] **统一后端实现**
  - 合并 `backend/app.js` 和 `backend/im-backend/`
  - 统一数据模型（Mongoose vs 模块化）
  - 完善错误处理

- [ ] **测试覆盖率**
  - 单元测试 > 80%
  - 集成测试完善
  - E2E 测试（Playwright）

- [ ] **代码规范**
  - ESLint 配置
  - Prettier 格式化
  - Git hooks（husky + lint-staged）

### 性能优化

- [ ] **数据库优化**
  - 索引优化
  - 查询性能分析
  - 连接池配置

- [ ] **前端优化**
  - 代码分割
  - 资源压缩
  - CDN 加速

### 文档完善

- [ ] **API 文档**
  - Swagger/OpenAPI
  - 接口示例
  - 错误码说明

- [ ] **部署文档**
  - Kubernetes 部署
  - CI/CD 流程
  - 监控与告警

---

## 贡献指南 🤝

欢迎贡献！请查看 `DEVELOPMENT.md` 了解开发流程。

### 认领任务

1. 在 GitHub Issues 中找到感兴趣的功能
2. 评论认领任务
3. 创建功能分支开发
4. 提交 Pull Request

### 优先级标签

- 🔥 **高优先级**：核心功能，需尽快完成
- 📌 **中优先级**：重要功能，按计划推进
- 💡 **低优先级**：锦上添花，有余力时完成
- 🎨 **UI/UX**：界面优化相关
- 🐛 **Bug 修复**：已知问题修复

---

**最后更新：** 2025-10-17  
**版本：** v1.0  
**下一里程碑：** v1.1（预计2周后发布）
